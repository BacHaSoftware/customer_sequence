<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="view_partner_form_inherit" model="ir.ui.view">
			<field name="name">res.partner.form.inherit</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_form"/>
			<field name="arch" type="xml">
				<xpath expr="//span[@name='address_name']" position="before">
					<field name="customer_code" readonly="1" force_save="1"/>
				</xpath>
			</field>
		</record>

		<record id="view_partner_tree_inherit" model="ir.ui.view">
			<field name="name">res.partner.form.inherit</field>
			<field name="model">res.partner</field>
			<field name="inherit_id" ref="base.view_partner_tree"/>
			<field name="arch" type="xml">
				<xpath expr="//field[@name='display_name']" position="before">
					<field name="customer_code" readonly="1" force_save="1"/>
				</xpath>
			</field>
		</record>

		<record id="bh_quick_create_opportunity_form" model="ir.ui.view">
            <field name="name">bh.crm.lead.form.quick_create</field>
            <field name="model">crm.lead</field>
            <field name="priority">1000</field>
			<field name="inherit_id" ref="crm.quick_create_opportunity_form"/>
            <field name="arch" type="xml">
				<xpath expr="//field[@name='partner_id']" position="replace">
					<field name="partner_id" widget="res_partner_many2one" options="{'no_quick_create': True}"
                            string='Organization / Contact'
                            context="{
                            'res_partner_search_mode': 'customer',
                            'default_name': contact_name or partner_name,
                            'default_is_company': contact_name == False,
                            'default_company_name': partner_name,
                            'default_phone': phone,
                            'default_email': email_from,
                            'default_user_id': user_id,
                            'default_team_id': team_id,
                            'show_vat': True}"/>
				</xpath>
			</field>
		</record>

		<record id="bh_crm_lead_view_form" model="ir.ui.view">
            <field name="name">crm.lead.form</field>
            <field name="model">crm.lead</field>
			<field name="inherit_id" ref="crm.crm_lead_view_form"/>
            <field name="arch" type="xml">
				<xpath expr="//group[@name='opportunity_partner']/field[@name='partner_id']" position="replace">
					<field name="partner_id" options="{'no_quick_create': True}"
						widget="res_partner_many2one"
						string="Customer"
						context="{'res_partner_search_mode': 'customer',
							'default_name': contact_name or partner_name,
							'default_street': street,
							'default_is_company': contact_name == False,
							'default_company_name': partner_name,
							'default_street2': street2,
							'default_city': city,
							'default_title': title,
							'default_state_id': state_id,
							'default_zip': zip,
							'default_country_id': country_id,
							'default_function': function,
							'default_phone': phone,
							'default_mobile': mobile,
							'default_email': email_from,
							'default_user_id': user_id,
							'default_team_id': team_id,
							'default_website': website,
							'show_vat': True,
						}"
					/>
				</xpath>
				<xpath expr="//group[@name='lead_partner']/field[@name='partner_id']" position="replace">
					<field name="partner_id" options="{'no_quick_create': True}"
						widget="res_partner_many2one"
						string="Customer"
					    invisible="is_partner_visible == False"
						context="{'res_partner_search_mode': 'customer',
								'default_is_company': True,
								'default_name': contact_name,
								'default_title': title,
								'default_street': street,
								'default_street2': street2,
								'default_city': city,
								'default_state_id': state_id,
								'default_zip': zip,
								'default_country_id': country_id,
								'default_function': function,
								'default_phone': phone,
								'default_mobile': mobile,
								'default_email': email_from,
								'default_user_id': user_id,
								'default_team_id': team_id,
								'default_website': website,
								'default_lang': lang_code,
								'show_vat': True }"/>
				</xpath>
			</field>
		</record>
	</data>
</odoo>
